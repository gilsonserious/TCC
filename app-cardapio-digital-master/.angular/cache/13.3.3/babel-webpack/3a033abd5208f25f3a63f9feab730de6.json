{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../../providers/firebase\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction CarrinhoPage_div_8_ion_item_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 11)(1, \"ion-row\", 12)(2, \"ion-col\", 13);\n    i0.ɵɵelement(3, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-col\", 15)(5, \"ion-label\", 16);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementStart(7, \"ion-icon\", 17);\n    i0.ɵɵlistener(\"click\", function CarrinhoPage_div_8_ion_item_4_Template_ion_icon_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const i_r6 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.remover(i_r6);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"p\", 18);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 19)(11, \"ion-badge\", 20);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const p_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"background\", \"url(\" + p_r5.imagem + \")\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", p_r5.titulo, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", p_r5.descricao, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"color\", ctx_r4.firebase.config.color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r4.firebase.config.color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", p_r5.quantidade, \"x\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" R$\", p_r5.preco, \" \");\n  }\n}\n\nfunction CarrinhoPage_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"ion-list\", 8)(2, \"ion-list-header\", 9);\n    i0.ɵɵtext(3, \" Seus itens \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CarrinhoPage_div_8_ion_item_4_Template, 14, 10, \"ion-item\", 10);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r0.firebase.config.color);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.firebase.carrinho);\n  }\n}\n\nfunction CarrinhoPage_div_9_ion_item_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 26);\n    i0.ɵɵlistener(\"click\", function CarrinhoPage_div_9_ion_item_18_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const i_r11 = restoredCtx.index;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.deixarApenasUmMarcado(i_r11);\n    });\n    i0.ɵɵelementStart(1, \"ion-label\", 27);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-checkbox\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function CarrinhoPage_div_9_ion_item_18_Template_ion_checkbox_ngModelChange_3_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const opcao_r10 = restoredCtx.$implicit;\n      return opcao_r10.checked = $event;\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const opcao_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(opcao_r10.titulo);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", opcao_r10.checked);\n  }\n}\n\nfunction CarrinhoPage_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"ion-list\", 8)(2, \"ion-list-header\", 9);\n    i0.ɵɵtext(3, \" Seus dados \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-row\")(5, \"ion-col\", 21)(6, \"ion-item\")(7, \"ion-label\", 22);\n    i0.ɵɵtext(8, \"Nome\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function CarrinhoPage_div_9_Template_ion_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.cliente.nome = $event;\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"ion-col\", 21)(11, \"ion-item\")(12, \"ion-label\", 22);\n    i0.ɵɵtext(13, \"Dia\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ion-input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function CarrinhoPage_div_9_Template_ion_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.cliente.nome = $event;\n    });\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(15, \"ion-list\", 24)(16, \"ion-list-header\", 9);\n    i0.ɵɵtext(17, \" Como voc\\u00EA quer pagar? \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, CarrinhoPage_div_9_ion_item_18_Template, 4, 2, \"ion-item\", 25);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r1.firebase.config.color);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.cliente.nome);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.cliente.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r1.firebase.config.color);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.cliente.horario);\n  }\n}\n\nfunction CarrinhoPage_ion_footer_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-footer\", 29);\n    i0.ɵɵlistener(\"click\", function CarrinhoPage_ion_footer_10_Template_ion_footer_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.enviar();\n    });\n    i0.ɵɵelementStart(1, \"ion-toolbar\")(2, \"div\", 30)(3, \"ion-title\", 31);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r2.firebase.config.color);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Enviar pedido por R$\", ctx_r2.total, \"\");\n  }\n}\n\nfunction CarrinhoPage_ion_footer_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-footer\", 29);\n    i0.ɵɵlistener(\"click\", function CarrinhoPage_ion_footer_11_Template_ion_footer_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.finalizar();\n    });\n    i0.ɵɵelementStart(1, \"ion-toolbar\")(2, \"div\", 30)(3, \"ion-title\", 31);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r3.firebase.config.color);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Finalizar pedido por R$\", ctx_r3.total, \"\");\n  }\n}\n\nexport let CarrinhoPage = /*#__PURE__*/(() => {\n  class CarrinhoPage {\n    constructor(modalController, firebase, toastController, alertController, http, loadingController) {\n      this.modalController = modalController;\n      this.firebase = firebase;\n      this.toastController = toastController;\n      this.alertController = alertController;\n      this.http = http;\n      this.loadingController = loadingController;\n      this.total = 0;\n      this.step = 0;\n      this.cliente = {\n        nome: null,\n        dia: null,\n        // horario: null,\n        // cep: null,\n        // rua: null,\n        // bairro: null,\n        // cidade: null,\n        // complemento: \"\",\n        // numero: null,\n        troco: \"\",\n        horario: [{\n          \"titulo\": '19h as 20h20',\n          \"checked\": false\n        }, {\n          \"titulo\": '20h40 as 22h',\n          \"checked\": false\n        }, {\n          \"titulo\": '19h as 22h',\n          \"checked\": false\n        }]\n      }; //Total\n\n      this.firebase.carrinho.forEach(item => {\n        this.total = this.total + item.preco * item.quantidade;\n      });\n    }\n\n    deixarApenasUmMarcado(index) {\n      let i = 0;\n\n      for (i; i < this.cliente.horario.length; i++) {\n        if (i != index) {\n          this.cliente.horario[i].checked = false;\n        }\n      }\n    }\n\n    ngOnInit() {}\n\n    fechar() {\n      if (this.step > 0) {\n        this.step = 0;\n      } else {\n        this.modalController.dismiss();\n      }\n    }\n\n    remover(i) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create({\n          header: 'Quer mesmo remover esse item?',\n          message: 'Essa ação não pode ser desfeita.',\n          buttons: [{\n            text: 'Cancelar',\n            role: 'cancel',\n            handler: () => {}\n          }, {\n            text: 'Remover',\n            handler: () => {\n              this.firebase.carrinho.splice(i, 1); //Atualizar total\n\n              this.firebase.carrinho.forEach(item => {\n                this.total = this.total + item.preco * item.quantidade;\n              });\n            }\n          }]\n        });\n        yield alert.present();\n      });\n    }\n\n    finalizar() {\n      this.step = 1;\n    } // calcularCep(){\n    //   if(this.cliente.cep.length > 7){\n    //     this.http.get('https://viacep.com.br/ws/' + this.cliente.cep + '/json/').subscribe((r) => {\n    //       console.log(r)\n    //       this.cliente.bairro = r['bairro'];\n    //       this.cliente.rua = r['logradouro'];\n    //       this.cliente.cidade = r['localidade']\n    //     })\n    //   }\n    // }\n    //Finalizar pedido\n\n\n    enviar() {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (this.cliente.nome) {\n          let pedido = {\n            cliente: this.cliente,\n            itens: this.firebase.carrinho,\n            status: 'aguardando',\n            data: new Date(),\n            total: this.total\n          };\n          const alert = yield this.alertController.create({\n            header: 'Deseja finalizar o pedido?',\n            message: 'O estabelecimento receberá sua solicitação.',\n            buttons: [{\n              text: 'Cancelar',\n              role: 'cancel',\n              handler: () => {}\n            }, {\n              text: 'Fazer pedido',\n              handler: () => __awaiter(this, void 0, void 0, function* () {\n                const loading = yield this.loadingController.create({\n                  message: 'Finalizando...'\n                });\n                yield loading.present(); //Enviar para o firebase\n\n                this.firebase.pedir(pedido).then(id => __awaiter(this, void 0, void 0, function* () {\n                  //Adicionar no localstorage\n                  let historicoPedidos = JSON.parse(localStorage.getItem('historicoPedidos'));\n\n                  if (!historicoPedidos) {\n                    historicoPedidos = [];\n                    historicoPedidos.push(id);\n                    localStorage.setItem('historicoPedidos', JSON.stringify(historicoPedidos));\n                  } else {\n                    historicoPedidos.push(id);\n                    localStorage.setItem('historicoPedidos', JSON.stringify(historicoPedidos));\n                  }\n\n                  const toast = yield this.toastController.create({\n                    message: 'Tudo certo! Você pode acompanhar tudo na aba Meus Pedidos',\n                    duration: 2000\n                  });\n                  toast.present(); //Voltar para home\n\n                  yield loading.dismiss();\n                  this.firebase.carrinho = [];\n                  this.step = 0;\n                  this.fechar();\n                })).catch(() => __awaiter(this, void 0, void 0, function* () {\n                  yield loading.dismiss();\n                  const alert = yield this.alertController.create({\n                    header: 'Ops!',\n                    message: 'Algo deu errado. Por favor, tente novamente.',\n                    buttons: [{\n                      text: 'Voltar',\n                      role: 'cancel',\n                      handler: () => {}\n                    }]\n                  });\n                  yield alert.present();\n                }));\n              })\n            }]\n          });\n          yield alert.present();\n        } else {\n          const alert = yield this.alertController.create({\n            header: 'Ops!',\n            message: 'Por favor, preencha todos os campos.',\n            buttons: [{\n              text: 'Entendi',\n              role: 'cancel',\n              handler: () => {}\n            }]\n          });\n          yield alert.present();\n        }\n      });\n    }\n\n  }\n\n  CarrinhoPage.ɵfac = function CarrinhoPage_Factory(t) {\n    return new (t || CarrinhoPage)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.FirebaseService), i0.ɵɵdirectiveInject(i1.ToastController), i0.ɵɵdirectiveInject(i1.AlertController), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i1.LoadingController));\n  };\n\n  CarrinhoPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CarrinhoPage,\n    selectors: [[\"app-carrinho\"]],\n    decls: 12,\n    vars: 14,\n    consts: [[\"collapse\", \"undefined\", \"mode\", \"ios\", 3, \"translucent\"], [\"slot\", \"start\", 3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"chevron-back-outline\"], [\"size\", \"large\", 2, \"text-align\", \"center\", \"font-size\", \"18px\"], [3, \"fullscreen\"], [\"id\", \"container\", 4, \"ngIf\"], [\"mode\", \"ios\", 3, \"click\", 4, \"ngIf\"], [\"id\", \"container\"], [\"mode\", \"ios\", 2, \"margin-top\", \"20px\"], [2, \"margin-bottom\", \"15px\", \"color\", \"#fff\"], [\"lines\", \"none\", 4, \"ngFor\", \"ngForOf\"], [\"lines\", \"none\"], [2, \"width\", \"100%\"], [\"size\", \"4\"], [1, \"produtoImagem\"], [\"size\", \"8\"], [2, \"overflow\", \"visible !important\", \"color\", \"rgb(61, 61, 61)\", \"font-size\", \"15px\"], [\"name\", \"trash-outline\", 2, \"color\", \"red\", \"margin-left\", \"10px\", \"font-size\", \"13px\", 3, \"click\"], [2, \"color\", \"rgb(85, 85, 85)\", \"font-size\", \"11px\", \"margin-top\", \"0px\", \"margin-bottom\", \"0px\", \"width\", \"100%\"], [2, \"font-size\", \"10px\", \"position\", \"relative\", \"top\", \"-5px\"], [\"color\", \"primary\", 2, \"font-size\", \"10px\", \"position\", \"relative\", \"top\", \"4px\", \"margin-right\", \"10px\"], [\"size\", \"6\"], [\"position\", \"stacked\"], [3, \"ngModel\", \"ngModelChange\"], [\"mode\", \"ios\", \"lines\", \"none\", 2, \"margin-top\", \"20px\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [2, \"font-size\", \"14px\"], [\"slot\", \"end\", \"color\", \"success\", 3, \"ngModel\", \"ngModelChange\"], [\"mode\", \"ios\", 3, \"click\"], [1, \"footerDiv\"], [2, \"color\", \"#fff\", \"font-size\", \"14px\"]],\n    template: function CarrinhoPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1);\n        i0.ɵɵlistener(\"click\", function CarrinhoPage_Template_ion_buttons_click_2_listener() {\n          return ctx.fechar();\n        });\n        i0.ɵɵelementStart(3, \"ion-button\");\n        i0.ɵɵelement(4, \"ion-icon\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"ion-title\", 3);\n        i0.ɵɵtext(6, \" Carrinho \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(7, \"ion-content\", 4);\n        i0.ɵɵtemplate(8, CarrinhoPage_div_8_Template, 5, 3, \"div\", 5);\n        i0.ɵɵtemplate(9, CarrinhoPage_div_9_Template, 19, 7, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, CarrinhoPage_ion_footer_10_Template, 5, 3, \"ion-footer\", 6);\n        i0.ɵɵtemplate(11, CarrinhoPage_ion_footer_11_Template, 5, 3, \"ion-footer\", 6);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵstyleProp(\"background-color\", ctx.firebase.config.color);\n        i0.ɵɵproperty(\"translucent\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"background-color\", ctx.firebase.config.color);\n        i0.ɵɵadvance(3);\n        i0.ɵɵstyleProp(\"color\", ctx.firebase.config.color);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"color\", ctx.firebase.config.color);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step == 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step == 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step == 0);\n      }\n    },\n    directives: [i1.IonHeader, i1.IonToolbar, i1.IonButtons, i1.IonButton, i1.IonIcon, i1.IonTitle, i1.IonContent, i4.NgIf, i1.IonList, i1.IonListHeader, i4.NgForOf, i1.IonItem, i1.IonRow, i1.IonCol, i1.IonLabel, i1.IonBadge, i1.IonInput, i1.TextValueAccessor, i5.NgControlStatus, i5.NgModel, i1.IonCheckbox, i1.BooleanValueAccessor, i1.IonFooter],\n    styles: [\"#container[_ngcontent-%COMP%]{padding:30px}.promoCard[_ngcontent-%COMP%]{width:100%;height:100px;background:#6b6969;border-radius:5px;background-size:cover!important;background-position-x:center!important;background-position-y:center!important}.logo[_ngcontent-%COMP%]{width:60px}ion-menu-button[_ngcontent-%COMP%]{--color: white !important;color:#fff!important}ion-menu-buttons[_ngcontent-%COMP%]{--color: white !important;color:#fff!important}.header-translucent-ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--opacity: 0 !important}ion-item[_ngcontent-%COMP%]{--padding-start: 0px;margin-bottom:15px}ion-list-header[_ngcontent-%COMP%]{-webkit-padding-start:0px;padding-inline-start:0px;padding:0 10px;align-items:center;font-size:16px;border-radius:5px}ion-col[_ngcontent-%COMP%]{padding:0}.produtoImagem[_ngcontent-%COMP%]{width:70px;height:70px;background-size:cover!important;background-position-x:center!important;background-position-y:center!important;border-radius:100px}.imagemProduto[_ngcontent-%COMP%]{background-size:cover!important;background-position-x:center!important;background-position-y:center!important;height:100px;width:100px;border-radius:100px}.containerProduto[_ngcontent-%COMP%]{width:100%;display:flex;text-align:center;justify-content:center}.descProduto[_ngcontent-%COMP%]{text-align:justify;text-justify:inter-word;font-size:14px;color:#666}.footerDiv[_ngcontent-%COMP%]{width:100%;height:50px}ion-input[_ngcontent-%COMP%]{font-size:13px}ion-content[_ngcontent-%COMP%]{--background: #fff !important}ion-item[_ngcontent-%COMP%]{--background: transparent !important}ion-list[_ngcontent-%COMP%]{--background: transparent !important;background:transparent!important;--ion-background-color: transparent !important}ion-label[_ngcontent-%COMP%]{color:#000!important}\"]\n  });\n  return CarrinhoPage;\n})();","map":null,"metadata":{},"sourceType":"module"}