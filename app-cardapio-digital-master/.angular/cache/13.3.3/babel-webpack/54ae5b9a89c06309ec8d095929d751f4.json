{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Injectable } from \"@angular/core\";\nlet FirebaseService = class FirebaseService {\n  constructor(afs, afAuth) {\n    this.afs = afs;\n    this.afAuth = afAuth;\n    this.carrinho = [];\n  }\n\n  iniciar() {\n    return new Promise((resolve, reject) => {\n      //Login anonimo\n      this.afAuth.signInAnonymously().then(() => {\n        //Recuperar configurações\n        this.afs.firestore.collection('config').doc('config').get().then(r => {\n          //Atribuir a variavel global (para recuperarmos de outras paginas)\n          this.config = r.data();\n          resolve(this.config);\n        });\n      });\n    });\n  }\n\n  categorias() {\n    return new Promise((resolve, reject) => {\n      //Recuperar categorias\n      this.afs.firestore.collection('categorias').get().then(lista => {\n        let array = [];\n        lista.forEach(item => {\n          //Formatar dado\n          let obj = item.data();\n          obj['id'] = item.id;\n          array.push(obj);\n        });\n        resolve(array);\n      });\n    });\n  }\n\n  produtosPorCategoria(categoriaId) {\n    return new Promise((resolve, reject) => {\n      //Recuperar categorias\n      this.afs.firestore.collection('produtos').where('categoria', '==', categoriaId).get().then(lista => {\n        let array = [];\n        lista.forEach(item => {\n          //Formatar dado\n          let obj = item.data();\n          obj['id'] = item.id;\n          array.push(obj);\n        });\n        resolve(array);\n      });\n    });\n  }\n\n  pedir(pedido) {\n    return new Promise((resolve, reject) => {\n      //Recuperar categorias\n      this.afs.firestore.collection('pedidos').add(pedido).then(r => {\n        resolve(r.id);\n      }).catch(e => {\n        reject(e);\n      });\n    });\n  }\n\n  pedido(id) {\n    return new Promise((resolve, reject) => {\n      //Recuperar categorias\n      this.afs.firestore.collection('pedidos').doc(id).get().then(r => {\n        resolve(r.data());\n      }).catch(e => {\n        reject(e);\n      });\n    });\n  }\n\n};\nFirebaseService = __decorate([Injectable({\n  providedIn: 'root'\n})], FirebaseService);\nexport { FirebaseService };","map":null,"metadata":{},"sourceType":"module"}