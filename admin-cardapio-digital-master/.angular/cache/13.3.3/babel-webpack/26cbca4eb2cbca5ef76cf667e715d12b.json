{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport firebase from 'firebase/app';\nlet LoginComponent = class LoginComponent {\n  constructor(afAuth, afs, router) {\n    this.afAuth = afAuth;\n    this.afs = afs;\n    this.router = router;\n    this.usuario = {\n      email: null,\n      senha: null\n    };\n  }\n\n  ngOnInit() {}\n\n  fazerLogin() {\n    console.log(this.usuario); //Logar no autentication\n\n    this.afAuth.signInWithEmailAndPassword(this.usuario.email, this.usuario.senha).then(() => {\n      this.afAuth.setPersistence(firebase.auth.Auth.Persistence.SESSION);\n      console.log('logado'); //Verificar se está cadastrado como admin\n\n      this.afs.firestore.collection('admins').where('email', '==', this.usuario.email).get().then(r => {\n        let array = [];\n        r.forEach(rr => {\n          array.push(rr.data());\n        });\n\n        if (array.length > 0) {\n          //Acesso liberado\n          this.router.navigate(['admin/dashboard']);\n        } else {\n          alert('Ops! Acesso não liberado');\n        }\n      });\n    }).catch(() => {\n      alert('Ops! Acesso não liberado');\n    });\n  }\n\n};\nLoginComponent = __decorate([Component({\n  selector: \"app-login\",\n  templateUrl: \"./login.component.html\"\n})], LoginComponent);\nexport { LoginComponent };","map":null,"metadata":{},"sourceType":"module"}