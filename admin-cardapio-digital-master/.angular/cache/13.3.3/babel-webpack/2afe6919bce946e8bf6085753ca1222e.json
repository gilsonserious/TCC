{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { finalize } from \"rxjs/operators\";\nimport 'firebase/firestore'; // import {AlertModalService} from '../../shared/alert-modal.service';\n// import { EventEmitter } from \"stream\";\n\nlet CardSettingsComponent = class CardSettingsComponent {\n  constructor(storage, afs, afAuth, auth) {\n    this.storage = storage;\n    this.afs = afs;\n    this.afAuth = afAuth;\n    this.auth = auth;\n    this.novo = false;\n    this.usuario = {\n      nome: null,\n      senha: null,\n      email: null,\n      imagem: null,\n      celular: null,\n      username: null,\n      uid: null\n    };\n    this.title = \"cloudsSorage\";\n    this.selectedFile = null;\n    this.opcional = null;\n  }\n\n  ngOnInit() {} //Upload de imagem\n\n\n  onFileSelected(event) {\n    var n = Date.now();\n    const file = event.target.files[0];\n    const filePath = `imagems/${n}`;\n    const fileRef = this.storage.ref(filePath);\n    const task = this.storage.upload(`imagems/${n}`, file);\n    task.snapshotChanges().pipe(finalize(() => {\n      this.downloadURL = fileRef.getDownloadURL();\n      this.downloadURL.subscribe(url => {\n        //Salva a URL gerada para o arquivo\n        if (url) {\n          this.fb = url;\n          this.usuario.imagem = this.fb;\n        }\n      });\n    })).subscribe(url => {\n      if (url) {\n        console.log(url);\n      }\n    });\n  }\n\n  salvar() {\n    if (this.usuario.nome && this.usuario.email && this.usuario.senha && this.usuario.username) {\n      this.auth.signup({\n        email: this.usuario.email,\n        password: this.usuario.senha\n      }).then(res => {\n        if (res.user.uid) {\n          // this.carregar();\n          this.novo = false;\n          this.auth.saveDetails(this.usuario = {\n            nome: this.usuario.nome,\n            email: this.usuario.email,\n            senha: this.usuario.senha,\n            celular: this.usuario.celular,\n            imagem: null,\n            username: this.usuario.username,\n            uid: res.user.uid\n          }).then(res => {\n            alert('Conta Criada!');\n            this.usuario = {\n              nome: null,\n              email: null,\n              senha: null,\n              celular: null,\n              imagem: null,\n              username: null,\n              uid: null\n            };\n          }, err => {\n            console.log(this.auth.verificarErro(err));\n            alert(this.auth.verificarErro(err.error));\n          });\n        }\n      }, err => {\n        let str = err.toString().replace(/.*\\(|\\).*/g, '');\n        console.log(str); // Pega o que est√° entre parenteses\n\n        alert(this.auth.verificarErro(str));\n      });\n    } else {\n      alert('Por favor, preencha todos os campos');\n    }\n  }\n\n};\nCardSettingsComponent = __decorate([Component({\n  selector: \"app-card-settings\",\n  templateUrl: \"./card-settings.component.html\"\n})], CardSettingsComponent);\nexport { CardSettingsComponent };","map":null,"metadata":{},"sourceType":"module"}